{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vShow as _vShow, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-0555a116\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"w-100 h-100 mt-5\"\n};\nconst _hoisted_2 = {\n  ref: \"hightlightContainer\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"phoneme-container\"\n};\nconst _hoisted_5 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" <textarea class=\\\"w-75 m-3 p-3\\\" v-model=\\\"text\\\"></textarea> \"), _createCommentVNode(\" <button class=\\\"btn btn-primary\\\" @click=\\\"startReading\\\">Read Text</button> \"), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.text = $event),\n    type: \"text\",\n    placeholder: \"Enter Text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.text]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.speak && $options.speak(...args))\n  }, \"Read Aloud\"), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.words, (word, index) => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: index,\n      class: _normalizeClass({\n        highlighted: $data.currentIndex === index\n      })\n    }, [_createTextVNode(_toDisplayString(word) + \" \", 1 /* TEXT */), _hoisted_3], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.phonemes, phoneme => {\n    return _withDirectives((_openBlock(), _createElementBlock(\"img\", {\n      key: phoneme.id,\n      src: phoneme.url,\n      alt: \"Phoneme\"\n    }, null, 8 /* PROPS */, _hoisted_5)), [[_vShow, phoneme.show]]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","ref","_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","$data","text","$event","type","placeholder","onClick","_cache","args","$options","speak","_hoisted_2","_Fragment","_renderList","words","word","index","key","_normalizeClass","highlighted","currentIndex","_hoisted_3","_hoisted_4","phonemes","phoneme","id","src","url","alt","show"],"sources":["/Users/lopesti/WebTeam/avatar-narrator-poc/src/components/NarratingAvatar.vue"],"sourcesContent":["<template>\n  <div class=\"w-100 h-100 mt-5\">\n    <!-- <textarea class=\"w-75 m-3 p-3\" v-model=\"text\"></textarea> -->\n    <!-- <button class=\"btn btn-primary\" @click=\"startReading\">Read Text</button> -->\n\n    <input v-model=\"text\" type=\"text\" placeholder=\"Enter Text\" />\n    <button @click=\"speak\">Read Aloud</button>\n    <div ref=\"hightlightContainer\">\n      <span\n        v-for=\"(word, index) in words\"\n        :key=\"index\"\n        :class=\"{ highlighted: currentIndex === index }\"\n      >\n        {{ word }} <span> </span>\n      </span>\n    </div>\n    <div class=\"phoneme-container\">\n      <img\n        v-for=\"phoneme in phonemes\"\n        :key=\"phoneme.id\"\n        :src=\"phoneme.url\"\n        v-show=\"phoneme.show\"\n        alt=\"Phoneme\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport imageAEI from \"../assets/AEI.png\";\nimport imageBMP from \"../assets/BMP.png\";\nimport imageN from \"../assets/Nn.png\";\nimport imageCDGKNRSTXYZ from \"../assets/CDGKNRSTXYZ.png\";\nimport imageCHJSONSH from \"../assets/CH,J,SH.png\";\nimport imageFV from \"../assets/FV.png\";\nimport imageL from \"../assets/L.png\";\nimport imageO from \"../assets/O.png\";\nimport imageQW from \"../assets/QW.png\";\nimport imageTH from \"../assets/TH.png\";\nimport imageU from \"../assets/U.png\";\nimport imageE from \"../assets/E.png\";\n\nexport default {\n  data() {\n    return {\n      text: \"\",\n      words: [],\n      currentIndex: -1,\n      letterIndex: 0,\n      phonemes: [\n        {\n          id: 1,\n          url: imageAEI,\n          letters: [\"a\", \"e\", \"i\"],\n          show: false,\n        },\n        {\n          id: 2,\n          url: imageBMP,\n          letters: [\"b\", \"m\", \"p\"],\n          show: false,\n        },\n        {\n          id: 3,\n          url: imageCDGKNRSTXYZ,\n          letters: [\"c\", \"d\", \"g\", \"k\", \"n\", \"r\", \"s\", \"t\", \"z\"],\n          show: false,\n        },\n        {\n          id: 4,\n          url: imageCHJSONSH,\n          letters: [\"ch\", \"j\", \"sh\"],\n          show: false,\n        },\n        {\n          id: 5,\n          url: imageFV,\n          letters: [\"f\", \"v\"],\n          show: false,\n        },\n        {\n          id: 6,\n          url: imageL,\n          letters: [\"l\"],\n          show: false,\n        },\n        {\n          id: 7,\n          url: imageO,\n          letters: [\"o\"],\n          show: false,\n        },\n        {\n          id: 8,\n          url: imageQW,\n          letters: [\"q\", \"w\"],\n          show: false,\n        },\n        {\n          id: 9,\n          url: imageTH,\n          letters: [\"t\", \"h\"],\n          show: false,\n        },\n        {\n          id: 10,\n          url: imageU,\n          letters: [\"u\"],\n          show: false,\n        },\n        {\n          id: 11,\n          url: imageN,\n          letters: [\"n\"],\n          show: false,\n        },\n        {\n          id: 12,\n          url: imageE,\n          letters: [\"e\"],\n          show: false,\n        },\n      ],\n    };\n  },\n  computed: {\n    displayPhonemes() {\n      if (this.currentIndex >= 0 && this.currentIndex < this.words.length) {\n        const word = this.words[this.currentIndex];\n        return this.phonemes.filter((phoneme) =>\n          phoneme.letters.some((letter) => word.includes(letter))\n        );\n      }\n      return [];\n    },\n  },\n  methods: {\n    // startReading() {\n    //   let speech = new SpeechSynthesisUtterance();\n    //   speech.lang = \"en-US\";\n    //   speech.text = this.text;\n    //   speech.volume = 1;\n    //   speech.rate = 0.9;\n    //   speech.pitch = 1;\n    //   window.speechSynthesis.speak(speech);\n    // },\n    speak() {\n      this.currentIndex = -1;\n      this.letterIndex = 0;\n      this.words = this.text.split(\" \");\n      this.speakLetter();\n    },\n    speakLetter() {\n      if (this.currentIndex < this.words.length - 1) {\n        const currentWord = this.words[this.currentIndex];\n        const currentLetter = currentWord[this.letterIndex].toLowerCase();\n        const utterance = new SpeechSynthesisUtterance(currentLetter);\n        utterance.addEventListener(\"end\", () => {\n          this.highlightNextLetter(currentWord);\n        });\n        speechSynthesis.speak(utterance);\n\n        this.currentIndex++;\n\n        utterance.lang = \"en-US\";\n        utterance.text = this.text;\n        utterance.volume = 1;\n        utterance.rate = 0.9;\n        utterance.pitch = 1;\n        // utterance.addEventListener(\"end\", this.readNextWord);\n        speechSynthesis.speak(utterance);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.highlighted {\n  background-color: yellow;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAkB;;EAMtBC,GAAG,EAAC;AAAqB;gEAMfC,mBAAA,CAAc;;EAGxBF,KAAK,EAAC;AAAmB;;;uBAfhCG,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBJC,mBAAA,mEAAkE,EAClEA,mBAAA,kFAAiF,E,gBAEjFH,mBAAA,CAA6D;+DAA7CI,KAAA,CAAAC,IAAI,GAAAC,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA9BJ,KAAA,CAAAC,IAAI,E,GACpBL,mBAAA,CAA0C;IAAjCS,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;KAAE,YAAU,GACjCX,mBAAA,CAQM,OARNc,UAQM,I,kBAPJb,mBAAA,CAMOc,SAAA,QAAAC,WAAA,CALmBZ,KAAA,CAAAa,KAAK,GAArBC,IAAI,EAAEC,KAAK;yBADrBlB,mBAAA,CAMO;MAJJmB,GAAG,EAAED,KAAK;MACVrB,KAAK,EAAAuB,eAAA;QAAAC,WAAA,EAAiBlB,KAAA,CAAAmB,YAAY,KAAKJ;MAAK;0CAE1CD,IAAI,IAAG,GAAC,iBAAAM,UAAc,C;0DAG7BxB,mBAAA,CAQM,OARNyB,UAQM,I,kBAPJxB,mBAAA,CAMEc,SAAA,QAAAC,WAAA,CALkBZ,KAAA,CAAAsB,QAAQ,EAAnBC,OAAO;0CADhB1B,mBAAA,CAME;MAJCmB,GAAG,EAAEO,OAAO,CAACC,EAAE;MACfC,GAAG,EAAEF,OAAO,CAACG,GAAG;MAEjBC,GAAG,EAAC;oDADIJ,OAAO,CAACK,IAAI,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}