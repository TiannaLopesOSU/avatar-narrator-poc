{"ast":null,"code":"import imageAEI from \"../assets/AEI.png\";\nimport imageBMP from \"../assets/BMP.png\";\nimport imageN from \"../assets/Nn.png\";\nimport imageCDGKNRSTXYZ from \"../assets/CDGKNRSTXYZ.png\";\nimport imageCHJSONSH from \"../assets/CH,J,SH.png\";\nimport imageFV from \"../assets/FV.png\";\nimport imageL from \"../assets/L.png\";\nimport imageO from \"../assets/O.png\";\nimport imageQW from \"../assets/QW.png\";\nimport imageTH from \"../assets/TH.png\";\nimport imageU from \"../assets/U.png\";\nimport imageE from \"../assets/E.png\";\nexport default {\n  data() {\n    return {\n      textInput: \"Please read this text aloud.\",\n      words: [],\n      characters: [],\n      currentWordIndex: -1,\n      currentLetterIndex: 0,\n      speech: new SpeechSynthesisUtterance(),\n      currentPhoneme: \"\",\n      letterMapping: {\n        a: imageAEI,\n        b: imageBMP,\n        c: imageCDGKNRSTXYZ,\n        ch: imageCHJSONSH,\n        d: imageFV,\n        e: imageL,\n        f: imageO,\n        g: imageQW,\n        h: imageTH,\n        i: imageU,\n        j: imageN,\n        k: imageE,\n        l: imageAEI,\n        m: imageBMP,\n        n: imageCDGKNRSTXYZ,\n        o: imageCHJSONSH,\n        p: imageFV,\n        q: imageL,\n        r: imageO,\n        s: imageQW,\n        t: imageTH,\n        u: imageU,\n        v: imageN,\n        w: imageE,\n        x: imageAEI,\n        y: imageBMP,\n        z: imageCDGKNRSTXYZ\n      }\n    };\n  },\n  computed: {},\n  methods: {\n    speak() {\n      this.startGettingLetters();\n      this.words = this.textInput.trim().split(/\\s+/);\n      this.currentWordIndex = 0;\n      this.speech.text = this.textInput;\n      this.speech.rate = 0.5;\n      this.speech.onboundary = this.highlightWord;\n      speechSynthesis.speak(this.speech);\n    },\n    highlightWord(event) {\n      if (event.name === \"word\") {\n        this.currentWordIndex = this.textInput.substring(-1, event.charIndex).trim().split(/\\s+/).length;\n      }\n    },\n    startGettingLetters() {\n      this.characters = this.textInput.trim().split(\"\");\n      const delay = 105;\n      this.characters.forEach((char, index) => {\n        setTimeout(() => {\n          this.currentLetterIndex = index;\n          this.currentPhoneme = this.letterMapping[char];\n        }, index * delay);\n      });\n    }\n  }\n};","map":{"version":3,"names":["imageAEI","imageBMP","imageN","imageCDGKNRSTXYZ","imageCHJSONSH","imageFV","imageL","imageO","imageQW","imageTH","imageU","imageE","data","textInput","words","characters","currentWordIndex","currentLetterIndex","speech","SpeechSynthesisUtterance","currentPhoneme","letterMapping","a","b","c","ch","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","computed","methods","speak","startGettingLetters","trim","split","text","rate","onboundary","highlightWord","speechSynthesis","event","name","substring","charIndex","length","delay","forEach","char","index","setTimeout"],"sources":["/Users/lopesti/WebTeam/avatar-narrator-poc/src/components/NarratingAvatar.vue"],"sourcesContent":["<template>\n  <div class=\"w-100 h-100 m-5\">\n    <!-- inputing text and submitting -->\n    <textarea v-model=\"textInput\" rows=\"4\" cols=\"50\"></textarea>\n    <button @click=\"speak\" class=\"btn btn-primary\">Read Text</button>\n\n    <!-- <button @click=\"speakWithMicrosoft\" class=\"btn btn-primary\">\n      Read Text with Microsoft\n    </button> -->\n\n    <!-- Displaying text as it is being read -->\n    <div>\n      <span\n        v-for=\"(word, index) in words\"\n        :key=\"index\"\n        :class=\"{ highlighted: index === currentWordIndex }\"\n      >\n        {{ word }} <span> </span>\n      </span>\n    </div>\n\n    <!-- showing letters as they are being spoken -->\n    <div>\n      <span\n        v-for=\"(char, index) in characters\"\n        :key=\"index\"\n        :class=\"{ 'highlighted-pink': index === currentLetterIndex }\"\n      >\n        {{ char }}\n      </span>\n    </div>\n    <!-- Phonemes -->\n    <img :src=\"currentPhoneme\" />\n  </div>\n</template>\n\n<script>\nimport imageAEI from \"../assets/AEI.png\";\nimport imageBMP from \"../assets/BMP.png\";\nimport imageN from \"../assets/Nn.png\";\nimport imageCDGKNRSTXYZ from \"../assets/CDGKNRSTXYZ.png\";\nimport imageCHJSONSH from \"../assets/CH,J,SH.png\";\nimport imageFV from \"../assets/FV.png\";\nimport imageL from \"../assets/L.png\";\nimport imageO from \"../assets/O.png\";\nimport imageQW from \"../assets/QW.png\";\nimport imageTH from \"../assets/TH.png\";\nimport imageU from \"../assets/U.png\";\nimport imageE from \"../assets/E.png\";\n\nexport default {\n  data() {\n    return {\n      textInput: \"Please read this text aloud.\",\n      words: [],\n      characters: [],\n      currentWordIndex: -1,\n      currentLetterIndex: 0,\n      speech: new SpeechSynthesisUtterance(),\n      currentPhoneme: \"\",\n      letterMapping: {\n        a: imageAEI,\n        b: imageBMP,\n        c: imageCDGKNRSTXYZ,\n        ch: imageCHJSONSH,\n        d: imageFV,\n        e: imageL,\n        f: imageO,\n        g: imageQW,\n        h: imageTH,\n        i: imageU,\n        j: imageN,\n        k: imageE,\n        l: imageAEI,\n        m: imageBMP,\n        n: imageCDGKNRSTXYZ,\n        o: imageCHJSONSH,\n        p: imageFV,\n        q: imageL,\n        r: imageO,\n        s: imageQW,\n        t: imageTH,\n        u: imageU,\n        v: imageN,\n        w: imageE,\n        x: imageAEI,\n        y: imageBMP,\n        z: imageCDGKNRSTXYZ,\n      },\n    };\n  },\n  computed: {},\n  methods: {\n    speak() {\n      this.startGettingLetters();\n      this.words = this.textInput.trim().split(/\\s+/);\n\n      this.currentWordIndex = 0;\n\n      this.speech.text = this.textInput;\n      this.speech.rate = 0.5;\n\n      this.speech.onboundary = this.highlightWord;\n      speechSynthesis.speak(this.speech);\n    },\n    highlightWord(event) {\n      if (event.name === \"word\") {\n        this.currentWordIndex = this.textInput\n          .substring(-1, event.charIndex)\n          .trim()\n          .split(/\\s+/).length;\n      }\n    },\n    startGettingLetters() {\n      this.characters = this.textInput.trim().split(\"\");\n      const delay = 105;\n      this.characters.forEach((char, index) => {\n        setTimeout(() => {\n          this.currentLetterIndex = index;\n          this.currentPhoneme = this.letterMapping[char];\n        }, index * delay);\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.highlighted {\n  background-color: yellow;\n}\n.highlighted-pink {\n  background-color: pink;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}