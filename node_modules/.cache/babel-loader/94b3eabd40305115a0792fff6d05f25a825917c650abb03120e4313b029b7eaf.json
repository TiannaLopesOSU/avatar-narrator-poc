{"ast":null,"code":"// import imageAEI from \"../assets/AEI.png\";\n// import imageBMP from \"../assets/BMP.png\";\n// import imageN from \"../assets/Nn.png\";\n// import imageCDGKNRSTXYZ from \"../assets/CDGKNRSTXYZ.png\";\n// import imageCHJSONSH from \"../assets/CH,J,SH.png\";\n// import imageFV from \"../assets/FV.png\";\n// import imageL from \"../assets/L.png\";\n// import imageO from \"../assets/O.png\";\n// import imageQW from \"../assets/QW.png\";\n// import imageTH from \"../assets/TH.png\";\n// import imageU from \"../assets/U.png\";\n// import imageE from \"../assets/E.png\";\n\nexport default {\n  data() {\n    return {\n      textInput: \"Please read this text aloud.\",\n      words: [],\n      characters: [],\n      currentWordIndex: -1,\n      currentLetterIndex: -1,\n      speech: new SpeechSynthesisUtterance()\n    };\n  },\n  computed: {},\n  methods: {\n    speak() {\n      this.words = this.textInput.trim().split(/\\s+/);\n      this.characters = this.textInput.trim().split(\"\");\n      this.currentWordIndex = 0;\n      this.currentLetterIndex = 0;\n      this.speech.text = this.textInput;\n      this.speech.onstart = this.startSpeaking;\n      this.speech.onend = this.endSpeaking;\n      this.speech.onboundary = this.highlight;\n      speechSynthesis.speak(this.speech);\n    },\n    highlight(event) {\n      this.highlightWord(event);\n      this.highlightLetter(event);\n    },\n    highlightWord(event) {\n      if (event.name === \"word\") {\n        const index = event.charIndex;\n        this.currentWordIndex = this.textInput.substring(-1, index).trim().split(/\\s+/).length;\n      }\n    },\n    highlightLetter(event) {\n      console.log(event.name);\n      if (event.name === \"character\") {\n        const index = event.charIndex;\n        this.currentLetterIndex = this.textInput.substring(-1, index).trim().split(\"\").length;\n      }\n    },\n    startSpeaking() {\n      this.currentLetterIndex = 0;\n    },\n    endSpeaking() {\n      this.currentLetterIndex - 1;\n    }\n  }\n};","map":{"version":3,"names":["data","textInput","words","characters","currentWordIndex","currentLetterIndex","speech","SpeechSynthesisUtterance","computed","methods","speak","trim","split","text","onstart","startSpeaking","onend","endSpeaking","onboundary","highlight","speechSynthesis","event","highlightWord","highlightLetter","name","index","charIndex","substring","length","console","log"],"sources":["/Users/lopesti/WebTeam/avatar-narrator-poc/src/components/NarratingAvatar.vue"],"sourcesContent":["<template>\n  <div class=\"w-100 h-100 m-5\">\n    <!-- inputing text and submitting -->\n    <textarea v-model=\"textInput\" rows=\"4\" cols=\"50\"></textarea>\n    <button @click=\"speak\" class=\"btn btn-primary\">Read Text</button>\n\n    <!-- Displaying text as it is being read -->\n    <div>\n      <span\n        v-for=\"(word, index) in words\"\n        :key=\"index\"\n        :class=\"{ highlighted: index === currentWordIndex }\"\n      >\n        {{ word }} <span> </span>\n      </span>\n    </div>\n\n    <!-- showing letters as they are being spoken -->\n    <div>\n      <span\n        v-for=\"(char, index) in characters\"\n        :key=\"index\"\n        :class=\"{ 'highlighted-pink': index === currentLetterIndex }\"\n      >\n        {{ char }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\n// import imageAEI from \"../assets/AEI.png\";\n// import imageBMP from \"../assets/BMP.png\";\n// import imageN from \"../assets/Nn.png\";\n// import imageCDGKNRSTXYZ from \"../assets/CDGKNRSTXYZ.png\";\n// import imageCHJSONSH from \"../assets/CH,J,SH.png\";\n// import imageFV from \"../assets/FV.png\";\n// import imageL from \"../assets/L.png\";\n// import imageO from \"../assets/O.png\";\n// import imageQW from \"../assets/QW.png\";\n// import imageTH from \"../assets/TH.png\";\n// import imageU from \"../assets/U.png\";\n// import imageE from \"../assets/E.png\";\n\nexport default {\n  data() {\n    return {\n      textInput: \"Please read this text aloud.\",\n      words: [],\n      characters: [],\n      currentWordIndex: -1,\n      currentLetterIndex: -1,\n      speech: new SpeechSynthesisUtterance(),\n    };\n  },\n  computed: {},\n  methods: {\n    speak() {\n      this.words = this.textInput.trim().split(/\\s+/);\n      this.characters = this.textInput.trim().split(\"\");\n      this.currentWordIndex = 0;\n      this.currentLetterIndex = 0;\n      this.speech.text = this.textInput;\n\n      this.speech.onstart = this.startSpeaking;\n      this.speech.onend = this.endSpeaking;\n      this.speech.onboundary = this.highlight;\n      speechSynthesis.speak(this.speech);\n    },\n    highlight(event) {\n      this.highlightWord(event);\n      this.highlightLetter(event);\n    },\n    highlightWord(event) {\n      if (event.name === \"word\") {\n        const index = event.charIndex;\n        this.currentWordIndex = this.textInput\n          .substring(-1, index)\n          .trim()\n          .split(/\\s+/).length;\n      }\n    },\n    highlightLetter(event) {\n      console.log(event.name);\n      if (event.name === \"character\") {\n        const index = event.charIndex;\n        this.currentLetterIndex = this.textInput\n          .substring(-1, index)\n          .trim()\n          .split(\"\").length;\n      }\n    },\n    startSpeaking() {\n      this.currentLetterIndex = 0;\n    },\n    endSpeaking() {\n      this.currentLetterIndex - 1;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.highlighted {\n  background-color: yellow;\n}\n.highlighted-pink {\n  background-color: pink;\n}\n</style>\n"],"mappings":"AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,8BAA8B;MACzCC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAE,EAAE;MACdC,gBAAgB,EAAE,CAAC,CAAC;MACpBC,kBAAkB,EAAE,CAAC,CAAC;MACtBC,MAAM,EAAE,IAAIC,wBAAwB,CAAC;IACvC,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE,CAAC,CAAC;EACZC,OAAO,EAAE;IACPC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACR,KAAI,GAAI,IAAI,CAACD,SAAS,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAK,CAAC;MAC/C,IAAI,CAACT,UAAS,GAAI,IAAI,CAACF,SAAS,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,EAAE,CAAC;MACjD,IAAI,CAACR,gBAAe,GAAI,CAAC;MACzB,IAAI,CAACC,kBAAiB,GAAI,CAAC;MAC3B,IAAI,CAACC,MAAM,CAACO,IAAG,GAAI,IAAI,CAACZ,SAAS;MAEjC,IAAI,CAACK,MAAM,CAACQ,OAAM,GAAI,IAAI,CAACC,aAAa;MACxC,IAAI,CAACT,MAAM,CAACU,KAAI,GAAI,IAAI,CAACC,WAAW;MACpC,IAAI,CAACX,MAAM,CAACY,UAAS,GAAI,IAAI,CAACC,SAAS;MACvCC,eAAe,CAACV,KAAK,CAAC,IAAI,CAACJ,MAAM,CAAC;IACpC,CAAC;IACDa,SAASA,CAACE,KAAK,EAAE;MACf,IAAI,CAACC,aAAa,CAACD,KAAK,CAAC;MACzB,IAAI,CAACE,eAAe,CAACF,KAAK,CAAC;IAC7B,CAAC;IACDC,aAAaA,CAACD,KAAK,EAAE;MACnB,IAAIA,KAAK,CAACG,IAAG,KAAM,MAAM,EAAE;QACzB,MAAMC,KAAI,GAAIJ,KAAK,CAACK,SAAS;QAC7B,IAAI,CAACtB,gBAAe,GAAI,IAAI,CAACH,SAAQ,CAClC0B,SAAS,CAAC,CAAC,CAAC,EAAEF,KAAK,EACnBd,IAAI,CAAC,EACLC,KAAK,CAAC,KAAK,CAAC,CAACgB,MAAM;MACxB;IACF,CAAC;IACDL,eAAeA,CAACF,KAAK,EAAE;MACrBQ,OAAO,CAACC,GAAG,CAACT,KAAK,CAACG,IAAI,CAAC;MACvB,IAAIH,KAAK,CAACG,IAAG,KAAM,WAAW,EAAE;QAC9B,MAAMC,KAAI,GAAIJ,KAAK,CAACK,SAAS;QAC7B,IAAI,CAACrB,kBAAiB,GAAI,IAAI,CAACJ,SAAQ,CACpC0B,SAAS,CAAC,CAAC,CAAC,EAAEF,KAAK,EACnBd,IAAI,CAAC,EACLC,KAAK,CAAC,EAAE,CAAC,CAACgB,MAAM;MACrB;IACF,CAAC;IACDb,aAAaA,CAAA,EAAG;MACd,IAAI,CAACV,kBAAiB,GAAI,CAAC;IAC7B,CAAC;IACDY,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACZ,kBAAiB,GAAI,CAAC;IAC7B;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}